\section{Messages}

With django you can easily create messages and propagate them in between your pages. The messages application is already installed, if you create a new project. You just need to put some few statements into your \emph{webtech/config.py} to make it work. The second statement is used to make error messages work propperly with bootstrap. The css class therefore has to be set to danger, not error.
\begin{lstlisting}[style=Python, caption=webtech/config.py, label=lst:config.py1]
TEMPLATE_CONTEXT_PROCESSORS = (
    'django.contrib.messages.context_processors.messages',
    'django.contrib.auth.context_processors.auth'
)

from django.contrib.messages import constants as messages
MESSAGE_TAGS = {
    messages.ERROR: 'danger'
}
\end{lstlisting}

Update your \emph{views.py} in the following way to add some messages.
\begin{lstlisting}[style=Python, caption=Add messages to views, label=lst:views_msg]
def updateVote(course, vote):
    if vote == '1':
        course.votes += 1
        course.save()
        return  True
    elif vote == '-1':
        course.votes -= 1
        course.save()
        return True
    return False


def vote(request, pk, vote):
    """
    You can either up- or down-vote a course
    The vote is saved in the model
    Then the user is redirected to the index page
    :param request: Request to work on
    :param pk:      Primary key of the Course
    :param vote:    1 or -1 depending on up/down-vote
    :return:        Redirect to Index view or 404 error
    """
    # If there is no course with the corresponding pk return an error
    course = get_object_or_404(Course, pk=pk)
    if updateVote(course):
        messages.add_message(request, messages.SUCCESS, "Vote Successful")
        return HttpResponseRedirect(reverse('scorecard:index'))
    else:
        # Vote invalid
        messages.add_message(request, messages.WARNING, "Vote Not Successful")
        return HttpResponseRedirect(reverse('scorecard:index'))
\end{lstlisting}

To show the messages on your views page, use the following code. This uses djangos message.tags attribute to get the alert class for bootstrap.
\begin{lstlisting}[style=HTML, caption=index.html, label=lst:index.html1]
    <!-- Show message if stored -->
    {% if messages %}
        {% for message in messages %}
            <div class="alert alert-{{ message.tags }}">{{ message }}</div>
        {% endfor %}
    {% endif %}
\end{lstlisting}